//Expanded:znapi.github.io/scratchx/file-io/main.js
!function(t){function e(e,n,i,r){function s(t,e,n,i,r){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&("yes"==s.getResponseHeader("X-Is-ScratchX-File-IO-Helper-App")?i(s.responseText):r())},s.open(t,"http://localhost:8080/"+e,!0),void 0!==n?s.send(n):s.send()}var a;s(e,n,r,i,function(){t._getStatus=function(){return{status:1,msg:"Waiting for helper app"}},a=window.setInterval(s,5e3,e,n,r,function(e){window.clearInterval(a),t._getStatus=function(){return{status:2,msg:"Ready"}},i(e)},function(){})})}t.read=function(t,e){e("")},t.write=function(t,e,n){n()},t.make=function(t,e){e()},t._shutdown=function(){},t._getStatus=function(){return{status:1,msg:"Waiting for helper app"}},ScratchExtensions.register("Simple File I/O",{blocks:[["R","read from file %s","read","text.txt"],["w","write %s to file %s","write","hello world","text.txt"],["w","create file %s","make","text.txt"]],url:"https://github.com/Znapi/scratchx/wiki/Simple-File-IO"},t),e("OPTIONS","",function(){t._getStatus=function(){return{status:2,msg:"Ready"}},t.read=function(t,n){e("GET",t,n)},t.write=function(t,n,i){e("PUT",n,i,t)},t.make=function(t,n){e("POST",t,n)}})}({});
